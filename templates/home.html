{% extends "base.html" %}

{% block title %}Stationner - PayByPhone{% endblock %}

{% block content %}
<div class="flex flex-col min-h-screen">
    <!-- Header with gradient -->
    <div class="bg-gradient-to-b from-pbp-surface to-pbp-dark pt-6 pb-8 px-4">
        <!-- Title -->
        <h1 class="text-2xl sm:text-3xl font-bold mb-6">Stationner</h1>

        <!-- Search Form -->
        <form action="/zone" method="POST" id="searchForm">
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-pbp-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <input type="text" name="zone_code" id="zoneInput" placeholder="Rechercher par code tarif"
                    class="w-full bg-pbp-surface-light text-white placeholder-gray-400 rounded-xl py-4 pl-12 pr-4 text-base focus:ring-2 focus:ring-pbp-green transition-all"
                    autocomplete="off" inputmode="numeric" oninput="toggleSearchBtn()">
            </div>

            <!-- Search Button - visible when typing -->
            <button type="submit" id="searchBtn"
                class="w-full mt-3 bg-pbp-surface text-gray-400 py-4 rounded-xl font-semibold text-base transition-all duration-300 hidden">
                Rechercher
            </button>

            {% if error %}
            <p class="text-red-400 text-sm mt-2">{{ error }}</p>
            {% endif %}
        </form>
    </div>

    <!-- Content -->
    <div class="flex-1 px-4 py-6">
        <!-- Discover Section -->
        <h2 class="text-base sm:text-lg font-semibold text-gray-300 mb-4">DÃ©couvrir</h2>

        <!-- Business Card -->
        <div class="bg-pbp-surface rounded-2xl p-4 sm:p-5 relative overflow-hidden">
            <div class="relative z-10 pr-20 sm:pr-28">
                <h3 class="text-base sm:text-lg font-semibold mb-2">Simplifiez le stationnement pour votre entreprise
                </h3>
                <button onclick="window.location.href='/compte'"
                    class="mt-3 bg-pbp-surface-light hover:bg-gray-700 text-white text-xs sm:text-sm font-medium py-2 px-3 sm:px-4 rounded-lg transition-all">
                    PayByPhone Business
                </button>
            </div>

            <!-- Car Icon -->
            <div class="absolute right-2 top-1/2 -translate-y-1/2 opacity-90">
                <svg class="w-20 h-20 sm:w-28 sm:h-28 text-pbp-green animate-bounce-subtle" viewBox="0 0 100 60"
                    fill="currentColor">
                    <!-- Van body -->
                    <rect x="5" y="20" width="70" height="30" rx="5" fill="currentColor" />
                    <rect x="65" y="15" width="25" height="35" rx="5" fill="currentColor" />
                    <!-- Windows -->
                    <rect x="70" y="20" width="15" height="12" rx="2" fill="#121212" opacity="0.5" />
                    <!-- Wheels -->
                    <circle cx="25" cy="52" r="8" fill="#1E1E1E" />
                    <circle cx="25" cy="52" r="4" fill="currentColor" />
                    <circle cx="75" cy="52" r="8" fill="#1E1E1E" />
                    <circle cx="75" cy="52" r="4" fill="currentColor" />
                </svg>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bg-pbp-surface border-t border-gray-800 px-6 py-3 sm:py-4 safe-area-bottom">
        <div class="flex justify-around">
            <a href="/" class="text-center py-1">
                <svg class="w-6 h-6 text-pbp-green mx-auto mb-1" fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                </svg>
                <span class="text-xs text-pbp-green font-medium">Stationner</span>
            </a>
            <a href="/compte" class="text-center py-1 opacity-50 hover:opacity-100 transition-all">
                <svg class="w-6 h-6 text-gray-400 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                <span class="text-xs text-gray-400">Compte</span>
            </a>
        </div>
    </div>
</div>

<script>
    function toggleSearchBtn() {
        const input = document.getElementById('zoneInput');
        const btn = document.getElementById('searchBtn');

        if (input.value.trim().length > 0) {
            btn.classList.remove('hidden', 'bg-pbp-surface', 'text-gray-400');
            btn.classList.add('bg-pbp-green', 'text-white');
        } else {
            btn.classList.add('hidden');
        }
    }
</script>
{% endblock %}